<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSSè¯Šæ–­å·¥å…· - ç®€åŒ–ç‰ˆ</title>
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/cali-style.css">
    <link rel="stylesheet" href="/css/custom.css">
    <link rel="stylesheet" href="/css/cali-nav.css">
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #f8fafc;
            color: #1e293b;
            line-height: 1.6;
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }
        .header {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
            text-align: center;
        }
        .header h1 {
            color: #6366f1;
            margin-bottom: 1rem;
            font-size: 2.5rem;
        }
        .test-section {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }
        .test-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 8px;
            border-left: 4px solid #e2e8f0;
            background: #f8fafc;
        }
        .test-item.success {
            border-left-color: #10b981;
            background: #f0fdf4;
        }
        .test-item.error {
            border-left-color: #ef4444;
            background: #fef2f2;
        }
        .test-item.warning {
            border-left-color: #f59e0b;
            background: #fffbeb;
        }
        .status-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-right: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
        }
        .status-success { background: #10b981; }
        .status-error { background: #ef4444; }
        .status-warning { background: #f59e0b; }
        .test-visual {
            width: 80px;
            height: 80px;
            margin: 1rem;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 12px;
            text-align: center;
        }
        .main-test {
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4);
        }
        .cali-test {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            animation: fadeInUp 1s ease;
        }
        .custom-test {
            background: linear-gradient(135deg, #f59e0b, #f97316);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .nav-test {
            background: linear-gradient(135deg, #10b981, #059669);
            backdrop-filter: blur(10px);
        }
        .summary {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 2rem;
            font-family: 'Monaco', 'Menlo', monospace;
        }
        .code-block {
            background: #374151;
            color: #e5e7eb;
            padding: 1rem;
            border-radius: 6px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9rem;
            margin: 1rem 0;
            overflow-x: auto;
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }
        .mini-card {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ” CSSè¯Šæ–­å·¥å…·</h1>
        <p>å®æ—¶æ£€æµ‹CSSæ–‡ä»¶åŠ è½½çŠ¶æ€å’Œæ ·å¼åº”ç”¨æƒ…å†µ</p>
    </div>

    <div class="test-section">
        <h2>ğŸ“ CSSæ–‡ä»¶åŠ è½½çŠ¶æ€</h2>
        <div id="file-tests"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ¨ æ ·å¼åº”ç”¨æµ‹è¯•</h2>
        <div class="grid" id="style-tests"></div>
    </div>

    <div class="test-section">
        <h2>âš™ï¸ æµè§ˆå™¨ç¯å¢ƒ</h2>
        <div id="environment-tests"></div>
    </div>

    <div class="summary" id="summary"></div>

    <script>
        // ç®€åŒ–çš„CSSè¯Šæ–­
        function runCSSDiagnostics() {
            const results = {
                files: [],
                styles: [],
                environment: []
            };

            // 1. æ£€æŸ¥CSSæ–‡ä»¶åŠ è½½
            const cssFiles = [
                { name: 'main.css', href: '/css/main.css', className: 'main-test' },
                { name: 'cali-style.css', href: '/css/cali-style.css', className: 'cali-test' },
                { name: 'custom.css', href: '/css/custom.css', className: 'custom-test' },
                { name: 'cali-nav.css', href: '/css/cali-nav.css', className: 'nav-test' }
            ];

            // 2. æ£€æŸ¥æ ·å¼åº”ç”¨
            cssFiles.forEach(file => {
                const testDiv = document.createElement('div');
                testDiv.className = `test-visual ${file.className}`;
                testDiv.textContent = file.name.replace('.css', '');
                
                const computedStyle = window.getComputedStyle(testDiv);
                const hasGradient = computedStyle.backgroundImage.includes('gradient');
                
                results.styles.push({
                    name: file.name,
                    status: hasGradient ? 'success' : 'warning',
                    message: hasGradient ? 'æ ·å¼æ­£å¸¸åº”ç”¨' : 'æ ·å¼å¯èƒ½æœªç”Ÿæ•ˆ',
                    element: testDiv
                });
            });

            // 3. æ£€æŸ¥æµè§ˆå™¨ç¯å¢ƒ
            results.environment = [
                {
                    name: 'æ ·å¼è¡¨æ•°é‡',
                    status: document.styleSheets.length > 0 ? 'success' : 'error',
                    message: `æ£€æµ‹åˆ° ${document.styleSheets.length} ä¸ªæ ·å¼è¡¨`
                },
                {
                    name: 'å­—ä½“æ”¯æŒ',
                    status: typeof document.fonts !== 'undefined' ? 'success' : 'warning',
                    message: typeof document.fonts !== 'undefined' ? 'æ”¯æŒå­—ä½“API' : 'å­—ä½“APIä¸å¯ç”¨'
                },
                {
                    name: 'CSS Gridæ”¯æŒ',
                    status: CSS.supports('display', 'grid') ? 'success' : 'error',
                    message: CSS.supports('display', 'grid') ? 'æ”¯æŒCSS Grid' : 'ä¸æ”¯æŒCSS Grid'
                }
            ];

            return results;
        }

        function displayResults(results) {
            // æ˜¾ç¤ºæ–‡ä»¶æµ‹è¯•ç»“æœ
            const fileTests = document.getElementById('file-tests');
            const linkElements = document.querySelectorAll('link[rel="stylesheet"]');
            
            linkElements.forEach(link => {
                const href = link.href;
                const filename = href.split('/').pop();
                const success = href.includes('css') && !href.includes('fonts.googleapis');
                
                const item = document.createElement('div');
                item.className = `test-item ${success ? 'success' : 'warning'}`;
                item.innerHTML = `
                    <div class="status-icon ${success ? 'status-success' : 'status-warning'}">${success ? 'âœ“' : '?'}</div>
                    <div>
                        <strong>${filename}</strong><br>
                        <small>${success ? 'å·²åŠ è½½' : 'å¤–éƒ¨èµ„æº'}</small>
                    </div>
                `;
                fileTests.appendChild(item);
            });

            // æ˜¾ç¤ºæ ·å¼æµ‹è¯•ç»“æœ
            const styleTests = document.getElementById('style-tests');
            results.styles.forEach(style => {
                const miniCard = document.createElement('div');
                miniCard.className = 'mini-card';
                miniCard.appendChild(style.element);
                miniCard.innerHTML += `
                    <div style="margin-top: 0.5rem;">
                        <strong>${style.name}</strong><br>
                        <small style="color: ${style.status === 'success' ? '#10b981' : '#f59e0b'};">
                            ${style.message}
                        </small>
                    </div>
                `;
                styleTests.appendChild(miniCard);
            });

            // æ˜¾ç¤ºç¯å¢ƒæµ‹è¯•ç»“æœ
            const envTests = document.getElementById('environment-tests');
            results.environment.forEach(env => {
                const item = document.createElement('div');
                item.className = `test-item ${env.status}`;
                item.innerHTML = `
                    <div class="status-icon ${env.status === 'success' ? 'status-success' : 'status-warning'}">
                        ${env.status === 'success' ? 'âœ“' : '!'}
                    </div>
                    <div>
                        <strong>${env.name}</strong><br>
                        <small>${env.message}</small>
                    </div>
                `;
                envTests.appendChild(item);
            });

            // æ˜¾ç¤ºæ€»ç»“
            const summary = document.getElementById('summary');
            const successCount = results.styles.filter(s => s.status === 'success').length;
            const totalCount = results.styles.length;
            
            summary.innerHTML = `
                <h3>ğŸ“Š CSSè¯Šæ–­æ€»ç»“</h3>
                <div class="code-block">
                    âœ… æ ·å¼åº”ç”¨æˆåŠŸ: ${successCount}/${totalCount}<br>
                    ğŸ“ æ ·å¼è¡¨æ•°é‡: ${document.styleSheets.length}<br>
                    ğŸŒ ç”¨æˆ·ä»£ç†: ${navigator.userAgent.substring(0, 50)}...<br>
                    ğŸ¨ æ”¯æŒCSS Grid: ${CSS.supports('display', 'grid') ? 'æ˜¯' : 'å¦'}
                </div>
                <p><strong>å»ºè®®:</strong></p>
                <ul>
                    <li>å¦‚æœæ ·å¼æœªç”Ÿæ•ˆï¼Œæ£€æŸ¥CSSæ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®</li>
                    <li>ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·æ£€æŸ¥å…·ä½“å…ƒç´ çš„è®¡ç®—æ ·å¼</li>
                    <li>ç¡®è®¤CSSé€‰æ‹©å™¨ä¼˜å…ˆçº§æ˜¯å¦æ­£ç¡®</li>
                    <li>æ£€æŸ¥æ˜¯å¦æœ‰JavaScripté”™è¯¯å½±å“æ ·å¼åº”ç”¨</li>
                </ul>
            `;
        }

        // é¡µé¢åŠ è½½å®Œæˆåè¿è¡Œè¯Šæ–­
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                const results = runCSSDiagnostics();
                displayResults(results);
            }, 100);
        });
    </script>
</body>
</html>