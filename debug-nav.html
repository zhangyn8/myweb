<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>导航调试页面</title>
    <style>
        body { margin: 0; font-family: Arial, sans-serif; }
        .nav { position: fixed; top: 0; left: 0; right: 0; background: #333; padding: 20px; z-index: 1000; }
        .nav-item { color: white; text-decoration: none; padding: 10px 20px; margin: 0 10px; display: inline-block; border-radius: 5px; transition: all 0.3s ease; }
        .nav-item.active { background: #007bff; color: white; }
        .section { height: 100vh; padding: 100px 20px 20px; display: flex; align-items: center; justify-content: center; font-size: 2em; }
        #home { background: #f8f9fa; }
        #about { background: #e9ecef; }
        #skills { background: #dee2e6; }
        #projects { background: #ced4da; }
        #contact { background: #adb5bd; }
        .debug-info { position: fixed; bottom: 20px; right: 20px; background: rgba(0,0,0,0.8); color: white; padding: 15px; border-radius: 5px; font-family: monospace; font-size: 12px; max-width: 300px; z-index: 2000; }
    </style>
</head>
<body>
    <nav class="nav">
        <a href="#home" class="nav-item" data-section="home">首页</a>
        <a href="#about" class="nav-item" data-section="about">关于</a>
        <a href="#skills" class="nav-item" data-section="skills">技能</a>
        <a href="#projects" class="nav-item" data-section="projects">项目</a>
        <a href="#contact" class="nav-item" data-section="contact">联系</a>
    </nav>

    <section id="home" class="section" data-section="home">首页内容</section>
    <section id="about" class="section" data-section="about">关于内容</section>
    <section id="skills" class="section" data-section="skills">技能内容</section>
    <section id="projects" class="section" data-section="projects">项目内容</section>
    <section id="contact" class="section" data-section="contact">联系内容</section>

    <div class="debug-info" id="debugInfo">
        <div>滚动位置: <span id="scrollPos">0</span>px</div>
        <div>当前章节: <span id="currentSection">home</span></div>
        <div>导航项数量: <span id="navCount">0</span></div>
        <div>章节数量: <span id="sectionCount">0</span></div>
        <div>激活导航项: <span id="activeNav">无</span></div>
    </div>

    <script>
        function updateDebugInfo() {
            const scrollPos = window.scrollY;
            const sections = document.querySelectorAll("section[id]");
            const navItems = document.querySelectorAll(".nav-item");
            
            document.getElementById('scrollPos').textContent = scrollPos;
            document.getElementById('navCount').textContent = navItems.length;
            document.getElementById('sectionCount').textContent = sections.length;
            
            let currentSection = "home";
            const scrollPosition = scrollPos + 120;
            
            // 从底部向上检查
            for (let i = sections.length - 1; i >= 0; i--) {
                const section = sections[i];
                const sectionTop = section.offsetTop;
                const sectionHeight = section.offsetHeight;
                const sectionId = section.getAttribute("id");
                
                if (scrollPosition >= sectionTop) {
                    currentSection = sectionId;
                    break;
                }
            }
            
            document.getElementById('currentSection').textContent = currentSection;
            
            // 更新导航项状态
            let activeNavItem = "无";
            navItems.forEach(item => {
                item.classList.remove("active");
                const href = item.getAttribute("href");
                if (href === "#" + currentSection) {
                    item.classList.add("active");
                    activeNavItem = href;
                }
            });
            
            document.getElementById('activeNav').textContent = activeNavItem;
        }

        // 页面加载时执行
        window.addEventListener("load", () => {
            setTimeout(updateDebugInfo, 100);
        });
        
        // 滚动时执行
        window.addEventListener("scroll", () => {
            requestAnimationFrame(updateDebugInfo);
        });

        // 平滑滚动
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener("click", function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute("href"));
                if (target) {
                    const navHeight = 80;
                    const targetPosition = target.offsetTop - navHeight;
                    window.scrollTo({
                        top: targetPosition,
                        behavior: "smooth"
                    });
                }
            });
        });
    </script>
</body>
</html>